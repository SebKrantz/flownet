<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Transport Modeling in R • flownet</title>
<!-- katex math --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script><script src="katex-auto.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Transport Modeling in R">
<meta name="description" content="High-performance tools for transport modeling - network processing, route enumeration, and traffic assignment in R. The package implements the Path-Sized Logit model for traffic assignment - Ben-Akiva and Bierlaire (1999) &lt;doi:10.1007/978-1-4615-5203-1_2&gt; - an efficient route enumeration algorithm, and provides powerful utility functions for (multimodal) network generation, consolidation/contraction, and/or simplification. The user is expected to provide a transport network (either a graph or collection of linestrings) and an origin-destination (OD) matrix of trade/traffic flows. Maintained by transport consultants at CPCS (cpcs.ca).">
<meta property="og:description" content="High-performance tools for transport modeling - network processing, route enumeration, and traffic assignment in R. The package implements the Path-Sized Logit model for traffic assignment - Ben-Akiva and Bierlaire (1999) &lt;doi:10.1007/978-1-4615-5203-1_2&gt; - an efficient route enumeration algorithm, and provides powerful utility functions for (multimodal) network generation, consolidation/contraction, and/or simplification. The user is expected to provide a transport network (either a graph or collection of linestrings) and an origin-destination (OD) matrix of trade/traffic flows. Maintained by transport consultants at CPCS (cpcs.ca).">
<meta property="og:image" content="https://sebkrantz.github.io/flownet/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">flownet</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Documentation</a></li>
<li class="nav-item"><a class="nav-link" href="articles/index.html">Vignettes</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">News</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://sebkrantz.github.io/Rblog/">Blog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SebKrantz/flownet" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="flownet-">flownet <a class="anchor" aria-label="anchor" href="#flownet-"></a>
</h1>
</div>
<!-- badges: start -->

<p><strong>Transport Modeling: Network Processing, Route Enumeration, and Traffic Assignment</strong></p>
<p><code>flownet</code> provides efficient tools for transportation modeling in R, supporting network processing, route enumeration, and traffic assignment tasks. It implements the path-sized logit (PSL) model for traffic assignment and provides powerful utilities for network processing/preparation.</p>
<div class="section level3">
<h3 id="key-features">Key Features<a class="anchor" aria-label="anchor" href="#key-features"></a>
</h3>
<ul>
<li>
<strong>Path-Sized Logit Model</strong>: Stochastic traffic assignment accounting for route overlap</li>
<li>
<strong>Network Processing</strong>: Convert LINESTRINGs to network graphs and consolidate/simplify them</li>
<li>
<strong>Route Enumeration</strong>: Efficient algorithm for finding alternative routes between origin-destination pairs</li>
<li>
<strong>High Performance</strong>: <a href="https://fastverse.org/fastverse/" class="external-link">fastverse</a> packages and custom C implementations for critical path operations</li>
<li>
<strong>Multithreading</strong>: Asynchronous parallelism using <a href="https://github.com/r-lib/mirai" class="external-link"><code>mirai</code></a> for faster processing of large networks</li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install from CRAN</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"flownet"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Install development version from R-universe</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"flownet"</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"https://sebkrantz.r-universe.dev"</span>, <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"repos"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h3>
<ul>
<li>
<code>collapse</code> (&gt;= 2.1.5) - Fast data transformations and memory efficient programming</li>
<li>
<code>kit</code> (&gt;= 0.0.5) - Fast tabulation and vectorized switches</li>
<li>
<code>igraph</code> (&gt;= 2.1.4) - Graph operations and shortest path algorithms</li>
<li>
<code>sf</code> (&gt;= 1.0.0) - Spatial data handling</li>
<li>
<code>geodist</code> (&gt;= 0.1.1) - Fast geodesic distance computations</li>
<li>
<code>leaderCluster</code> (&gt;= 1.5.0) - Fast spatial clustering for network simplification</li>
<li>
<code>mirai</code> (&gt;= 2.5.2) - Asynchronous parallelism for R</li>
<li>
<code>progress</code> (&gt;= 1.2.3) - Progress bars for long-running operations</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="quick-start">Quick Start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<p>Below I provide some boilerplate code. See also the <a href="https://sebkrantz.github.io/flownet/articles/introduction.html">introductory vignette</a> for richer examples.</p>
<div class="section level3">
<h3 id="basic-usage">Basic Usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sebkrantz.github.io/flownet/">flownet</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a small graph data frame</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>                    to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span>, cost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Prepare OD matrix with the same node IDs as in graph</span></span>
<span><span class="va">od_matrix_long</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>                             to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span>, flow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">80</span>, <span class="fl">60</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run traffic assignment (and route enumeration)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/run_assignment.html">run_assignment</a></span><span class="op">(</span><span class="va">graph</span>, <span class="va">od_matrix_long</span>, angle.max <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="co">#&gt; Created graph with 4 nodes and 4 edges...</span></span>
<span><span class="co">#&gt; Computed distance matrix of dimensions 4 x 4 ...</span></span>
<span></span>
<span><span class="co"># Access results</span></span>
<span><span class="va">result</span><span class="op">$</span><span class="va">final_flows</span></span>
<span><span class="co">#&gt; [1] 100.00000  16.13649 196.13649  43.86351</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="working-with-spatial-networks">Working with Spatial Networks<a class="anchor" aria-label="anchor" href="#working-with-spatial-networks"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sebkrantz.github.io/flownet/">flownet</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Read network from shapefile and create undirected graph (optional)</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="st">"data/network.shp"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/linestrings_to_graph.html">linestrings_to_graph</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/create_undirected_graph.html">create_undirected_graph</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Read zone centroids and get nearest nodes</span></span>
<span><span class="va">od_zones</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="st">"data/od_zones.shp"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_centroid</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">nodes</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/nodes_from_graph.html">nodes_from_graph</a></span><span class="op">(</span><span class="va">graph</span>, sf <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">nearest_nodes</span> <span class="op">&lt;-</span> <span class="va">nodes</span><span class="op">$</span><span class="va">node</span><span class="op">[</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_nearest_feature.html" class="external-link">st_nearest_feature</a></span><span class="op">(</span><span class="va">od_zones</span>, <span class="va">nodes</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Consolidate Graph (optional)</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/consolidate_graph.html">consolidate_graph</a></span><span class="op">(</span><span class="va">graph</span>, keep <span class="op">=</span> <span class="va">nearest_nodes</span>, w <span class="op">=</span> <span class="op">~</span> <span class="va">cost</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Simplify network by keeping only traversed edges along shortest paths (optional)</span></span>
<span><span class="co"># Use 'by' for multimodal networks to compute paths separately per mode</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/simplify_network.html">simplify_network</a></span><span class="op">(</span><span class="va">graph</span>, <span class="va">nearest_nodes</span>, cost.column <span class="op">=</span> <span class="st">"cost"</span>, by <span class="op">=</span> <span class="op">~</span> <span class="va">mode</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-workflow">Example Workflow<a class="anchor" aria-label="anchor" href="#example-workflow"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fastverse.github.io/fastverse/" class="external-link">fastverse</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://fastverse.github.io/fastverse/reference/fastverse_extend.html" class="external-link">fastverse_extend</a></span><span class="op">(</span><span class="va">flownet</span>, <span class="va">sf</span>, <span class="va">mapview</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1. Load network and OD zone nodes</span></span>
<span><span class="va">network</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="st">"data/network.shp"</span><span class="op">)</span></span>
<span><span class="va">od_zones</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="st">"data/od_zones.shp"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_centroid</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">od_matrix</span> <span class="op">&lt;-</span> <span class="fu">fread</span><span class="op">(</span><span class="st">"data/od_container_flows.csv"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">qM</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">od_matrix</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">od_zones</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"zones and OD matrix must match"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. Convert network to graph</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="va">network</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/linestrings_to_graph.html">linestrings_to_graph</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/create_undirected_graph.html">create_undirected_graph</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3. Map zones to nearest network nodes</span></span>
<span><span class="va">nodes</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/nodes_from_graph.html">nodes_from_graph</a></span><span class="op">(</span><span class="va">graph</span>, sf <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">nearest_nodes</span> <span class="op">&lt;-</span> <span class="va">nodes</span><span class="op">$</span><span class="va">node</span><span class="op">[</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_nearest_feature.html" class="external-link">st_nearest_feature</a></span><span class="op">(</span><span class="va">od_zones</span>, <span class="va">nodes</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># 4. Prepare OD matrix</span></span>
<span><span class="va">od_matrix_long</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/melt_od_matrix.html">melt_od_matrix</a></span><span class="op">(</span><span class="va">od_matrix</span>, nodes <span class="op">=</span> <span class="va">nearest_nodes</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 5. Run assignment</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/run_assignment.html">run_assignment</a></span><span class="op">(</span><span class="va">graph</span>, <span class="va">od_matrix_long</span>, cost.column <span class="op">=</span> <span class="st">"cost_column"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 6. Visualize results (optional)</span></span>
<span><span class="va">network</span><span class="op">$</span><span class="va">final_flows</span> <span class="op">&lt;-</span> <span class="cn">NA_real_</span></span>
<span><span class="va">network</span><span class="op">$</span><span class="va">final_flows</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">graph</span>, <span class="st">"group.starts"</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">result</span><span class="op">$</span><span class="va">final_flows</span></span>
<span><span class="fu">mapview</span><span class="op">(</span><span class="va">network</span>, zcol <span class="op">=</span> <span class="st">"final_flows"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="included-data">Included Data<a class="anchor" aria-label="anchor" href="#included-data"></a>
</h3>
<p>The package includes four example datasets for Africa:</p>
<ul>
<li><p><strong><code>africa_network</code></strong>: A road transport network with 2,825 LINESTRING features representing existing roads (2,344 edges) and proposed new links (481 edges). Each edge includes attributes such as distance, travel duration, border crossing costs, terrain ruggedness, and road upgrade costs.</p></li>
<li><p><strong><code>africa_cities_ports</code></strong>: 453 African cities with population &gt; 100,000 and international ports. Includes population data, capital status, and port cargo outflows.</p></li>
<li><p><strong><code>africa_segments</code></strong>: 14,358 raw network segments representing intersected road routes. Useful for demonstrating network consolidation and simplification functions.</p></li>
<li><p><strong><code>africa_trade</code></strong>: Bilateral trade flows between 47 African countries aggregated by HS section (21 product categories). Values represent annual averages over 2012-2022.</p></li>
</ul>
<p>The <code>africa_network</code>, <code>africa_cities_ports</code>, and <code>africa_segments</code> datasets are from Krantz, S. (2024). <a href="https://doi.org/10.1596/1813-9450-10893" class="external-link">Optimal Investments in Africa’s Road Network</a>. Policy Research Working Paper 10893. World Bank. Replication materials are available at <a href="https://github.com/SebKrantz/OptimalAfricanRoads" class="external-link">github.com/SebKrantz/OptimalAfricanRoads</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="main-functions">Main Functions<a class="anchor" aria-label="anchor" href="#main-functions"></a>
</h2>
<div class="section level3">
<h3 id="traffic-assignment-and-route-enumeration">Traffic Assignment and Route Enumeration<a class="anchor" aria-label="anchor" href="#traffic-assignment-and-route-enumeration"></a>
</h3>
<ul>
<li>
<strong><code><a href="reference/run_assignment.html">run_assignment()</a></code></strong>:
<ul>
<li>Iterates through OD-pairs generating sensible alternative routes</li>
<li>Assigns traffic flows to network edges using path-sized logit model</li>
<li>Supports directed and undirected graphs</li>
<li>Returns flows and optional path/route information</li>
<li>
<strong>Key Parameters</strong>:
<ul>
<li>
<strong><code>beta</code></strong> (default: 1): Path-sized logit parameter (beta_PSL)</li>
<li>
<strong><code>detour.max</code></strong> (default: 1.5): Maximum detour factor for alternative routes. Higher values consider more routes but increase computation time</li>
<li>
<strong><code>angle.max</code></strong> (default: 90): Maximum detour angle in degrees (two-sided)</li>
<li>
<strong><code>return.extra</code></strong>: Additional results to return from the route enumeration stage (<code>"paths"</code>, <code>"edges"</code>, <code>"counts"</code>, <code>"costs"</code>, <code>"weights"</code>)</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="network-processing">Network Processing<a class="anchor" aria-label="anchor" href="#network-processing"></a>
</h3>
<ul>
<li>
<strong><code><a href="reference/linestrings_to_graph.html">linestrings_to_graph()</a></code></strong> - Convert LINESTRING geometries to graph data frame</li>
<li>
<strong><code><a href="reference/create_undirected_graph.html">create_undirected_graph()</a></code></strong> - Convert directed graph to undirected with edge aggregation</li>
<li>
<strong><code><a href="reference/consolidate_graph.html">consolidate_graph()</a></code></strong> - Consolidate graph by removing intermediate nodes and merging edges</li>
<li>
<strong><code><a href="reference/simplify_network.html">simplify_network()</a></code></strong> - Simplify network using shortest-paths or spatial clustering methods</li>
</ul>
</div>
<div class="section level3">
<h3 id="graph-utilities">Graph Utilities<a class="anchor" aria-label="anchor" href="#graph-utilities"></a>
</h3>
<ul>
<li>
<strong><code><a href="reference/nodes_from_graph.html">nodes_from_graph()</a></code></strong> - Extract unique nodes with coordinates from graph</li>
<li>
<strong><code><a href="reference/normalize_graph.html">normalize_graph()</a></code></strong> - Normalize node IDs to consecutive integers starting from 1</li>
<li>
<strong><code><a href="reference/linestrings_from_graph.html">linestrings_from_graph()</a></code></strong> - Convert graph to LINESTRING geometries</li>
<li>
<strong><code><a href="reference/distances_from_graph.html">distances_from_graph()</a></code></strong> - Compute distance matrix for all node pairs</li>
</ul>
</div>
<div class="section level3">
<h3 id="od-matrix-utilities">OD Matrix Utilities<a class="anchor" aria-label="anchor" href="#od-matrix-utilities"></a>
</h3>
<ul>
<li>
<strong><code><a href="reference/melt_od_matrix.html">melt_od_matrix()</a></code></strong> - Convert origin-destination matrices to long format</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="authors">Authors<a class="anchor" aria-label="anchor" href="#authors"></a>
</h2>
<ul>
<li>Sebastian Krantz</li>
<li>Kamol Roy</li>
</ul>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>GPL-3</p>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>If you use <code>flownet</code> in your research, please cite:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">"flownet"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=flownet" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/SebKrantz/flownet/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/SebKrantz/flownet/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing flownet</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Sebastian Krantz <br><small class="roles"> Author, maintainer </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sebastian Krantz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
