% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{simplify_network}
\alias{simplify_network}
\title{Simplify Network}
\usage{
simplify_network(
  x,
  od_matrix_long,
  cost.column = NULL,
  return = c("edges", "edge_counts", "graph_df")
)
}
\arguments{
\item{x}{Either an sf object with LINESTRING geometry representing the network, or a
data.frame with columns \code{from} and \code{to} representing the graph edges.}

\item{od_matrix_long}{A data.frame representing the origin-destination matrix in long format.
If \code{x} is a LINETRING geometry, it should have columns \code{FX}, \code{FY}, \code{TX}, \code{TY}
representing the origin/destination zone centroids. If \code{x} is a graph data frame, it should have columns
\code{from} and \code{to} matching nodes in \code{x}.}

\item{cost.column}{Character string (optional). Name of the cost column in \code{x}.
If \code{NULL} and \code{x} is an sf object, uses \code{st_length(x)} as the cost.}

\item{return}{description}
}
\value{
If \code{x} is an sf object, returns a list with:
  \itemize{
    \item \code{network} - sf object containing only edges that were traversed
    \item \code{graph_df} - data.frame with graph representation of traversed edges
  }
  If \code{x} is a data.frame, returns a data.frame containing only edges that were traversed.
}
\description{
Simplify a network by keeping only edges that are traversed by shortest paths
  between origin-destination pairs in the OD matrix.
}
\details{
This function simplifies a network by:
\itemize{
  \item Converting the input to a graph representation (if needed)
  \item Validating that all origin and destination nodes exist in the network
  \item Computing shortest paths from each origin to all destinations using igraph
  \item Marking all edges that are traversed by at least one shortest path
  \item Returning only the subset of edges that were traversed
}

The function filters the OD matrix to include only rows with finite, positive flow values.
All shortest paths are computed using edge costs (either from \code{cost.column} or
geometric length for sf objects).
}
