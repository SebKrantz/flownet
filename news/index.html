<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • flownet</title><!-- katex math --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script><script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Changelog"><meta property="og:image" content="https://sebkrantz.github.io/flownet/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">flownet</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Documentation</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Vignettes</a></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://sebkrantz.github.io/Rblog/">Blog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SebKrantz/flownet" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/SebKrantz/flownet/blob/v0.2.0/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.0" id="flownet-020">flownet 0.2.0<a class="anchor" aria-label="anchor" href="#flownet-020"></a></h2>
<ul><li><p>Fixed bug in run_assignment with <code>return.extra = "edges"</code> where edge indices were incorrectly returned. Due to zero indexing in C vs. 1-indexing in R they where offset by one, thus, in <em>flownet</em> versions &lt;= 0.1.2, the correct edge indices can be retained by subtracting 1 from them.</p></li>
<li><p>Improved <a href="https://sebkrantz.github.io/flownet/reference/run_assignment.html#route-enumeration-algorithm">Step 7</a> (elimination of path with duplicate edges) in the route enumeration algorithm to properly handle directed paths, i.e., candidate paths where an intermediate node is approached via an edge and departed from via the same edge but in a different direction, are now also removed.</p></li>
<li><p>Added option <code>return.extra = "PSF"</code> which adds <code>"path_size_factors"</code> to the results object. This should be useful to calibrate the PSL model.</p></li>
<li><p>Added option <code>return.extra = "eweights"</code> which adds <code>"egde_weights"</code> to the results object. Edge weights are the sum of the path probabilities across all paths using that edge. These weights are computed efficiently at C-level, with minimal overhead, if requested.</p></li>
<li><p>Added verbosity to <code><a href="../reference/simplify_network.html">simplify_network()</a></code> (default <code>verbose = TRUE</code>).</p></li>
<li><p>Reordered elements in results object (class ‘flownet’) in a natural way: providing first the final flows, followed by path and edge-level additional results if requested through <code>return.extra</code>.</p></li>
<li><p>Added more unit tests covering <code>return.extra</code> options.</p></li>
<li><p>Added variable labels to included <code>africa_*</code> datasets - try <code><a href="https://fastverse.org/collapse/reference/small-helpers.html" class="external-link">collapse::namlab()</a></code> on them.</p></li>
<li><p>Small improvements to recursive logic in <code><a href="../reference/consolidate_graph.html">consolidate_graph()</a></code>.</p></li>
<li><p>Bumped <em>kit</em> dependency to 0.0.21 (for <code>fpmin()</code> and <code>fpmax()</code>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.2" id="flownet-012">flownet 0.1.2<a class="anchor" aria-label="anchor" href="#flownet-012"></a></h2><p class="text-muted">CRAN release: 2026-02-03</p>
<ul><li><p>In <code><a href="../reference/consolidate_graph.html">consolidate_graph()</a></code>: argument <code>consolidate</code> was renamed to <code>contract</code> for improved clarity, while ensuring backwards compatibility.</p></li>
<li><p>Minor improvements to documentation and vignette.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.1" id="flownet-011">flownet 0.1.1<a class="anchor" aria-label="anchor" href="#flownet-011"></a></h2><p class="text-muted">CRAN release: 2026-01-27</p>
<ul><li>Implemented minor CRAN comments</li>
</ul><div class="section level3">
<h3 id="documentation-improvements-0-1-1">Documentation Improvements<a class="anchor" aria-label="anchor" href="#documentation-improvements-0-1-1"></a></h3>
<ul><li>Restructured <code><a href="../reference/run_assignment.html">run_assignment()</a></code> <code>@details</code> section using <code>\subsection{}</code> for better organization:
<ul><li>Separate sections for AoN method, PSL method, route enumeration algorithm, and coordinate-based filtering</li>
</ul></li>
<li>Added <code>return.extra</code> parameter documentation as a clear table showing which options are available for each method</li>
<li>Clarified that <code>paths</code> returns edge indices, not node indices</li>
<li>Added comprehensive examples including:
<ul><li>PSL method usage with <code>nthreads</code> parameter</li>
<li>Trade flow disaggregation workflow (country-to-city level)</li>
</ul></li>
<li>Added academic references for the Path-Sized Logit model (Ben-Akiva &amp; Bierlaire, 1999)</li>
<li>Added link to AequilibraE (Python) documentation for additional PSL resources</li>
<li>Improved error messages to be more informative (show which columns are missing, what class was received)</li>
<li>Increased vignette table of contents depth for better navigation</li>
<li>Added citation for the PSL model in vignette</li>
</ul></div>
<div class="section level3">
<h3 id="testing-0-1-1">Testing<a class="anchor" aria-label="anchor" href="#testing-0-1-1"></a></h3>
<ul><li>Added testthat test suite with 150 tests covering:
<ul><li>
<code><a href="../reference/run_assignment.html">run_assignment()</a></code> (AoN and PSL methods)</li>
<li>
<code><a href="../reference/normalize_graph.html">normalize_graph()</a></code>, <code><a href="../reference/nodes_from_graph.html">nodes_from_graph()</a></code>, <code><a href="../reference/distances_from_graph.html">distances_from_graph()</a></code>
</li>
<li>
<code><a href="../reference/linestrings_to_graph.html">linestrings_to_graph()</a></code>, <code><a href="../reference/linestrings_from_graph.html">linestrings_from_graph()</a></code>, <code><a href="../reference/create_undirected_graph.html">create_undirected_graph()</a></code>
</li>
<li>
<code><a href="../reference/consolidate_graph.html">consolidate_graph()</a></code>, <code><a href="../reference/simplify_network.html">simplify_network()</a></code>
</li>
<li><code><a href="../reference/melt_od_matrix.html">melt_od_matrix()</a></code></li>
</ul></li>
<li>Added test coverage workflow</li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-0-1-1">Minor Improvements<a class="anchor" aria-label="anchor" href="#minor-improvements-0-1-1"></a></h3>
<ul><li>Better penalization strategy for multimodal networks in <code><a href="../reference/simplify_network.html">simplify_network()</a></code> shortest-paths method</li>
<li>Enforced numeric type conversion for cost columns</li>
<li>Various minor fixes and improvements</li>
</ul><hr></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0" id="flownet-010-initial-release">flownet 0.1.0 (Initial Release)<a class="anchor" aria-label="anchor" href="#flownet-010-initial-release"></a></h2>
<div class="section level3">
<h3 id="major-features-0-1-0">Major Features<a class="anchor" aria-label="anchor" href="#major-features-0-1-0"></a></h3>
<div class="section level4">
<h4 id="traffic-assignment-and-route-enumeration-0-1-0">Traffic Assignment and Route Enumeration<a class="anchor" aria-label="anchor" href="#traffic-assignment-and-route-enumeration-0-1-0"></a></h4>
<ul><li>
<strong><code><a href="../reference/run_assignment.html">run_assignment()</a></code></strong>: Core function for traffic assignment using the path-sized logit (PSL) model
<ul><li>Efficient route enumeration algorithm that generates sensible alternative routes between origin-destination pairs</li>
<li>Accounts for route overlap using path-sized logit probabilities</li>
<li>Supports both directed and undirected graphs</li>
<li>Configurable detour factors and angle constraints for route selection</li>
<li>Optional return of detailed path information, edge counts, costs, and weights</li>
<li>High-performance C implementation for critical path operations</li>
<li>Multithreading (asynchronous parallelism) using <a href="https://github.com/r-lib/mirai" class="external-link"><code>mirai</code></a>.</li>
</ul></li>
</ul></div>
<div class="section level4">
<h4 id="network-processing-0-1-0">Network Processing<a class="anchor" aria-label="anchor" href="#network-processing-0-1-0"></a></h4>
<ul><li>
<strong><code><a href="../reference/linestrings_to_graph.html">linestrings_to_graph()</a></code></strong>: Convert LINESTRING geometries (sf objects) to graph data frames
<ul><li>Extracts node coordinates and creates edge representations</li>
<li>Optional coordinate rounding for precision handling</li>
<li>Preserves additional columns from input data</li>
<li>Automatic computation of edge lengths</li>
</ul></li>
<li>
<strong><code><a href="../reference/create_undirected_graph.html">create_undirected_graph()</a></code></strong>: Convert directed graphs to undirected graphs
<ul><li>Normalizes edge directions and aggregates duplicate connections</li>
<li>Flexible aggregation using <code><a href="https://fastverse.org/collapse/reference/collap.html" class="external-link">collapse::collap()</a></code> with customizable functions</li>
<li>Preserves spatial coordinates and line identifiers</li>
</ul></li>
<li>
<strong><code><a href="../reference/consolidate_graph.html">consolidate_graph()</a></code></strong>: Simplify network topology by removing intermediate nodes
<ul><li>Removes nodes that occur exactly twice, merging connecting edges</li>
<li>Optional removal of loops, duplicate edges, and singleton edges</li>
<li>Recursive consolidation for complete simplification</li>
<li>Weighted aggregation of edge attributes</li>
<li>Preserves coordinate information when present</li>
</ul></li>
<li>
<strong><code><a href="../reference/simplify_network.html">simplify_network()</a></code></strong>: Simplify networks using shortest-paths or spatial clustering methods
<ul><li>
<strong>Method “shortest-paths”</strong>: Filters network to edges used in shortest paths between specified nodes</li>
<li>
<strong>Method “cluster”</strong>: Spatially clusters nodes using <code>leaderCluster</code> algorithm and contracts the graph</li>
</ul></li>
</ul></div>
<div class="section level4">
<h4 id="graph-utilities-0-1-0">Graph Utilities<a class="anchor" aria-label="anchor" href="#graph-utilities-0-1-0"></a></h4>
<ul><li>
<strong><code><a href="../reference/normalize_graph.html">normalize_graph()</a></code></strong>: Normalize node IDs to consecutive integers starting from 1
<ul><li>Essential for graph algorithms requiring sequential node IDs</li>
<li>Preserves graph structure while remapping identifiers</li>
</ul></li>
<li>
<strong><code><a href="../reference/nodes_from_graph.html">nodes_from_graph()</a></code></strong>: Extract unique nodes with coordinates from graph
<ul><li>Returns data frame or sf POINT object with node locations</li>
<li>Useful for mapping zones to network nodes</li>
</ul></li>
<li>
<strong><code><a href="../reference/linestrings_from_graph.html">linestrings_from_graph()</a></code></strong>: Convert graph data frames back to LINESTRING geometries
<ul><li>Inverse operation of <code><a href="../reference/linestrings_to_graph.html">linestrings_to_graph()</a></code>
</li>
<li>Preserves all graph attributes in output sf object</li>
</ul></li>
<li>
<strong><code><a href="../reference/distances_from_graph.html">distances_from_graph()</a></code></strong>: Compute distance matrices for all node pairs
<ul><li>Uses igraph for efficient shortest path distance computation</li>
<li>Supports both directed and undirected graphs</li>
</ul></li>
</ul></div>
<div class="section level4">
<h4 id="od-matrix-utilities-0-1-0">OD Matrix Utilities<a class="anchor" aria-label="anchor" href="#od-matrix-utilities-0-1-0"></a></h4>
<ul><li>
<strong><code><a href="../reference/melt_od_matrix.html">melt_od_matrix()</a></code></strong>: Convert origin-destination matrices to long format
<ul><li>Transforms matrix format to edge list suitable for traffic assignment</li>
<li>Handles missing values and zero flows</li>
</ul></li>
</ul></div>
<div class="section level4">
<h4 id="example-data-0-1-0">Example Data<a class="anchor" aria-label="anchor" href="#example-data-0-1-0"></a></h4>
<ul><li><p><strong><code>africa_network</code></strong>: A road transport network with 2,825 LINESTRING features representing existing roads (2,344 edges) and proposed new links (481 edges). Each edge includes attributes such as distance, travel duration, border crossing costs, terrain ruggedness, and road upgrade costs.</p></li>
<li><p><strong><code>africa_cities_ports</code></strong>: 453 African cities with population &gt; 100,000 and international ports. Includes population data, capital status, and port cargo outflows.</p></li>
<li><p><strong><code>africa_segments</code></strong>: 14,358 raw network segments representing intersected road routes. Useful for demonstrating network consolidation and simplification functions.</p></li>
<li><p><strong><code>africa_trade</code></strong>: Bilateral trade flows between 47 African countries aggregated by HS section (21 product categories). Values represent annual averages over 2012-2022.</p></li>
</ul><p>The <code>africa_network</code>, <code>africa_cities_ports</code>, and <code>africa_segments</code> datasets are from Krantz, S. (2024). <a href="https://doi.org/10.1596/1813-9450-10893" class="external-link">Optimal Investments in Africa’s Road Network</a>. Policy Research Working Paper 10893. World Bank. Replication materials are available at <a href="https://github.com/SebKrantz/OptimalAfricanRoads" class="external-link">github.com/SebKrantz/OptimalAfricanRoads</a>.</p>
</div>
</div>
<div class="section level3">
<h3 id="technical-details-0-1-0">Technical Details<a class="anchor" aria-label="anchor" href="#technical-details-0-1-0"></a></h3>
<ul><li>High-performance C implementations for path-sized logit computations</li>
<li>Efficient memory management for large networks</li>
<li>Integration with <code>collapse</code> package for fast data transformations</li>
<li>Uses <code>igraph</code> for graph operations and shortest path algorithms</li>
<li>Leverages <code>geodist</code> for fast geodesic distance computations</li>
<li>Leverages <code>leaderCluster</code> for efficient spatial clustering</li>
<li>Comprehensive documentation with examples and vignettes</li>
</ul></div>
<div class="section level3">
<h3 id="documentation-0-1-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-0-1-0"></a></h3>
<ul><li>Complete function documentation with roxygen2</li>
<li>README with quick start guide and examples</li>
<li>Introduction vignette demonstrating package workflow</li>
<li>Package-level documentation in <code>?flownet-package</code>
</li>
</ul></div>
<div class="section level3">
<h3 id="dependencies-0-1-0">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies-0-1-0"></a></h3>
<ul><li>
<strong>R</strong> (&gt;= 4.1)</li>
<li>
<strong>collapse</strong> (&gt;= 2.1.5) - Fast data transformations and memory efficient programming</li>
<li>
<strong>kit</strong> (&gt;= 0.0.5) - Fast tabulation and vectorized switches</li>
<li>
<strong>igraph</strong> (&gt;= 2.1.4) - Graph operations and shortest path algorithms</li>
<li>
<strong>sf</strong> (&gt;= 1.0.0) - Spatial data handling</li>
<li>
<strong>geodist</strong> (&gt;= 0.1.1) - Fast geodesic distance computations</li>
<li>
<strong>leaderCluster</strong> (&gt;= 1.5.0) - Efficient spatial clustering algorithms</li>
<li>
<strong>mirai</strong> (&gt;= 2.5.2) - Asynchronous parallelism for R</li>
<li>
<strong>progress</strong> (&gt;= 1.2.3) - Progress bars for long-running operations</li>
</ul></div>
<div class="section level3">
<h3 id="suggested-packages-0-1-0">Suggested Packages<a class="anchor" aria-label="anchor" href="#suggested-packages-0-1-0"></a></h3>
<ul><li>
<strong>fastverse</strong> (&gt;= 0.3.4) - Efficient data manipulation workflow</li>
<li>
<strong>mapview</strong> (&gt;= 2.11.2) - Interactive visualization of results</li>
<li>
<strong>tmap</strong> (&gt;= 4.0) - Static visualization of results</li>
</ul></div>
<div class="section level3">
<h3 id="license-0-1-0">License<a class="anchor" aria-label="anchor" href="#license-0-1-0"></a></h3>
<p>GPL-3</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sebastian Krantz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

